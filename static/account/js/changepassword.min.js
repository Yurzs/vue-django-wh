jQuery("#changepassword").bind("input propertychange",function(){$("#changepassword button").prop("disabled",false)});$("#changepassword").on("submit",function(a){$(':input[type="submit"]').prop("disabled",true);a.preventDefault();console.log("form submitted!");change_password()});function change_password(){var a=$(".pas-control").height();var b=$(".pas-control").width();$(".pas-control form").css({opacity:"0.1"});$(".spinner").html('<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>').css({top:$(".pas-control").height()/2,left:$(".pas-control").width()/2-35,color:"green",opacity:"1"});$.ajax({url:"/account/security/?security&password",type:"POST",data:{csrfmiddlewaretoken:document.getElementsByName("csrfmiddlewaretoken")[0].value,password:$(".password-reset").val(),newpassword:$(".newpassword-reset").val(),newrepass:$(".newrepass-reset").val(),ajax:true},success:function(d){console.log(d);console.log("success");$(".spinner ").html("");$(".pas-control form ").css({opacity:"1"});if(d.error){var c="";for(item in d.form.errors){c=c+item+": "+d.form.errors[item]+"\n"}$(".status-message").text(c+d.form.non_field_errors).css("color","red");$(':input[type="submit"]').prop("disabled",true).css("background-color","#6c757d")}else{$(".status-message").text(d.result).css("color","green");$("input[type=password]").each(function(){$(this).val("")});$(':input[type="submit"]').prop("disabled",true).css("background-color","#6c757d")}},error:function(d,e,c){$(".spinner ").html("");$(".pas-control form").css({opacity:"1"});$("#results").html("<span>Данный логин уже занят</span>");console.log(d.status+": "+d.responseText)}})};